<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1">
		
		<title>Outrage</title>

		<!-- Loading third party fonts -->
		<link href="http://fonts.googleapis.com/css?family=Roboto:300,400,700|" rel="stylesheet" type="text/css">
		<link href="fonts/font-awesome.min.css" rel="stylesheet" type="text/css">

		<!-- Loading main css file -->
		<link rel="stylesheet" href="style.css">
		
		<!--[if lt IE 9]>
		<script src="js/ie-support/html5.js"></script>
		<script src="js/ie-support/respond.js"></script>
		<![endif]-->
		<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
		<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
	</head>


	<body>
		
		<div class="site-content">
			<div class="site-header">
				<div class="container">
					<a href="index.html" class="branding">
						<img src="images/logo.png" alt="" class="logo">
						<div class="logo-type">
							<h1 class="site-title">Outrage</h1>
							<small class="site-description">Wingardium Leviosar</small>
						</div>
					</a>

					<!-- Default snippet for navigation -->
					<div class="main-navigation">
						<button type="button" class="menu-toggle"><i class="fa fa-bars"></i></button>
						<ul class="menu">
							<li class="menu-item current-menu-item"><a href="index.html">Home</a></li>
							<li class="menu-item"><a href="news.html">News</a></li>
							<li class="menu-item"><a href="live-cameras.html">Live cameras</a></li>
							<li class="menu-item"><a href="photos.html">Photos</a></li>
							<li class="menu-item"><a href="contact.html">Contact</a></li>
						</ul> <!-- .menu -->
					</div> <!-- .main-navigation -->

					<div class="mobile-navigation"></div>

				</div>
			</div> <!-- .site-header -->

			<div class="hero" data-bg-image="images/banner.png">
				<div class="container">
					<form action="#" class="find-location">
						<input type="text" placeholder="Find your location...">
						<input type="submit" value="Find">
					</form>

				</div>
			</div>
			<div class="forecast-table">
				<div class="container">
					<div class="forecast-container">
						<div class="today forecast">
							<div class="forecast-header-today" style="background: rgba(0, 0, 0, 0.1);
							padding: 10px;
							font-weight: 400;
							display: flex;
							justify-content: space-between;
							width: 100%;">
								<div class="todayDate" style="width: 100%;"></div>
								<div class="todayDay" style="width: 100%; display: flex;
								justify-content: flex-end;"></div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="location">New York</div>
								<div class="degree">
									<div class="num">23<sup>o</sup>C</div>
									<div class="forecast-icon">
										<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>									
									</div>	
								</div>
								<span class="precipprob"><img src="images/icon-umberella.png" alt="rain_chances"></span>
								<span class="windspeed"><img src="images/icon-wind.png" alt="WindSpeed"></span>
								<span><img src="images/icon-compass.png" alt=""></span>
							</div>
						</div>
						<div class="forecast">
							<div class="forecast-header">
								<div class="day"></div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="forecast-icon">
									<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>
								</div>
								<div class="degree"><sup></sup></div>
								<small class="lowTemp"><sup></sup></small>
							</div>
						</div>
						<div class="forecast">
							<div class="forecast-header">
								<div class="day"></div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="forecast-icon">
									<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>
								</div>
								<div class="degree"><sup></sup></div>
								<small class="lowTemp"><sup></sup></small>
							</div>
						</div>
						<div class="forecast">
							<div class="forecast-header">
								<div class="day"></div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="forecast-icon">
									<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>
								</div>
								<div class="degree"><sup></sup></div>
								<small class="lowTemp"><sup></sup></small>
							</div>
						</div>
						<div class="forecast">
							<div class="forecast-header">
								<div class="day"></div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="forecast-icon">
									<!-- <img src="images/icons/icon-12.svg" alt="" width=48> -->
									<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>
								</div>
								<div class="degree"><sup></sup></div>
								<small class="lowTemp"><sup></sup></small>
							</div>
						</div>
						<div class="forecast">
							<div class="forecast-header">
								<div class="day"></div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="forecast-icon">
									<!-- <img src="images/icons/icon-13.svg" alt="" width=48> -->
									<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>
								</div>
								<div class="degree"><sup></sup></div>
								<small class="lowTemp"><sup></sup></small>
							</div>
						</div>
						<div class="forecast">
							<div class="forecast-header">
								<div class="day">Sunday</div>
							</div> <!-- .forecast-header -->
							<div class="forecast-content">
								<div class="forecast-icon">
									<!-- <img src="images/icons/icon-14.svg" alt="" width=48> -->
									<ion-icon name="sunny-outline" style="color: #26b7db; font-size: 5rem;"></ion-icon>
								</div>
								<div class="degree"><sup></sup></div>
								<small class="lowTemp"><sup></sup></small>
							</div>
						</div>
					</div>
				</div>
			</div>
			<main class="main-content">
				<div class="fullwidth-block">
					<div class="container">
						<h2 class="section-title">Live cameras</h2>
						<div class="row">
							<div class="col-md-3 col-sm-6">
								<div class="live-camera">
									<figure class="live-camera-cover"><img src="images/live-camera-1.jpg" alt=""></figure>
									<h3 class="location">New York</h3>
									<small class="date"></small>
								</div>
							</div>
							<div class="col-md-3 col-sm-6">
								<div class="live-camera">
									<figure class="live-camera-cover"><img src="images/live-camera-2.jpg" alt=""></figure>
									<h3 class="location">Chicago</h3>
									<small class="date"></small>
								</div>
							</div>
							<div class="col-md-3 col-sm-6">
								<div class="live-camera">
									<figure class="live-camera-cover"><img src="images/live-camera-3.jpg" alt=""></figure>
									<h3 class="location">Tokyo</h3>
									<small class="date"></small>
								</div>
							</div>
							<div class="col-md-3 col-sm-6">
								<div class="live-camera">
									<figure class="live-camera-cover"><img src="images/live-camera-4.jpg" alt=""></figure>
									<h3 class="location">London</h3>
									<small class="date"></small>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="fullwidth-block" data-bg-color="#262936">
					<div class="container">
						<div class="row">
							<div class="col-md-4">
								<div class="news">
									<div class="date">06.10</div>
									<h3><a href="#">Some text </a></h3>
									<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis, voluptate?</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="news">
									<div class="date">06.10</div>
									<h3><a href="#">Doloremque laudantium totam sequi </a></h3>
									<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique, aliquam?</p>
								</div>
							</div>
							<div class="col-md-4">
								<div class="news">
									<div class="date">06.10</div>
									<h3><a href="#">Doloremque laudantium totam sequi </a></h3>
									<p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Doloribus, commodi!</p>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="fullwidth-block">
					<div class="container">
						<div class="row">
							<div class="col-md-4">
								<h2 class="section-title">Application features</h2>
								<ul class="arrow-feature">
									<li>
										<h3>Natus error sit voluptatem accusantium</h3>
										<p>Doloremque laudantium totam rem aperiam Inventore veritatis et quasi architecto beatae vitae.</p>
									</li>
									<li>
										<h3>Natus error sit voluptatem accusantium</h3>
										<p>Doloremque laudantium totam rem aperiam Inventore veritatis et quasi architecto beatae vitae.</p>
									</li>
									<li>
										<h3>Natus error sit voluptatem accusantium</h3>
										<p>Doloremque laudantium totam rem aperiam Inventore veritatis et quasi architecto beatae vitae.</p>
									</li>
								</ul>
							</div>
							<div class="col-md-4">
								<h2 class="section-title">Weather analyssis</h2>
								<ul class="arrow-list">
									<li><a href="#">Accusantium doloremque laudantium rem aperiam</a></li>
									<li><a href="#">Eaque ipsa quae ab illo inventore veritatis quasi</a></li>
									<li><a href="#">Architecto beatae vitae dicta sunt explicabo</a></li>
									<li><a href="#">Nemo enim ipsam voluptatem quia voluptas</a></li>
									<li><a href="#">Aspernatur aut odit aut fugit, sed quia consequuntur</a></li>
									<li><a href="#">Magni dolores eos qui ratione voluptatem sequi</a></li>
									<li><a href="#">Neque porro quisquam est qui dolorem ipsum quia</a></li>
								</ul>
							</div>
							<div class="col-md-4">
								<h2 class="section-title">Awesome Photos</h2>
								<div class="photo-grid">
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>
									<a href="#"><img src="https://picsum.photos/200/150" alt="#"></a>


									
								</div>
							</div>
						</div>
					</div>
				</div>
			</main> <!-- .main-content -->

			<footer class="site-footer">
				<div class="container">
					<div class="row">
						<div class="col-md-8">
							<form action="#" class="subscribe-form">
								<input type="text" placeholder="Enter your email to subscribe...">
								<input type="submit" value="Subscribe">
							</form>
						</div>
						<div class="col-md-3 col-md-offset-1">
							<div class="social-links">
								<a href="#"><i class="fa fa-facebook"></i></a>
								<a href="#"><i class="fa fa-twitter"></i></a>
								<a href="#"><i class="fa fa-google-plus"></i></a>
								<a href="#"><i class="fa fa-pinterest"></i></a>
							</div>
						</div>
					</div>
				</div>
			</footer> <!-- .site-footer -->
		</div>
		<script>
			window.addEventListener('load', function() {
				if (navigator.geolocation) {
					navigator.geolocation.getCurrentPosition(function(position) {
						var lat = position.coords.latitude;
						var lon = position.coords.longitude;
						var submit = document.querySelector('.find-location input[type="submit"]');
						var loading = document.querySelector('.forecast-container');
						submit.value = 'Loading ...';
						
						fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${lat},${lon}/next7days?unitGroup=metric&key=Q9WTTTKYS9S2JMWXNTDR2H7DU`)
							.then(response => response.json())
							.then(data => {
								console.log(data);
								submit.value = 'Find';
								
								if (data) {
							document.querySelector('.location').textContent = 'Your Location';
							document.querySelector('.degree .num').textContent = data.currentConditions.temp;
							document.querySelector('.windspeed').textContent = data.currentConditions.windspeed+'Km/h';
							document.querySelector('.precipprob').textContent = data.currentConditions.precipprob+'%'
							// Map the icon from the API to the corresponding ion-icon
							var iconMap = {
								'snow': 'snow-outline',
								'rain': 'rainy-outline',
								'fog': 'cloudy-outline',
								'wind': 'flag-outline',
								'cloudy': 'cloudy-outline',
								'partly-cloudy-day': 'partly-sunny-outline',
								'partly-cloudy-night': 'cloudy-night-outline',
								'clear-day': 'sunny-outline',
								'clear-night': 'moon-outline',
							};
							var icon = iconMap[data.currentConditions.icon] || 'help-circle-outline'; // Use 'help-circle-outline' as a default icon
							document.querySelector('.forecast-icon ion-icon').name = icon;
							// Loop through forecast data and update each day
							data.days.forEach((day, index) => {
								document.querySelector(`.forecast:nth-child(${index + 2}) .day`).textContent = day.datetime;
								document.querySelector(`.forecast:nth-child(${index + 2}) .degree`).textContent = day.tempmax + '째C';
								document.querySelector(`.forecast:nth-child(${index + 2}) .lowTemp`).textContent = day.tempmin + '째C';
								icon = iconMap[day.icon] || 'help-circle-outline';
								document.querySelector(`.forecast:nth-child(${index + 2}) .forecast-icon ion-icon`).name = icon;
							});
						} else {
							console.error('Data not found in the response');
						}
								
							})
							.catch(error => {
								submit.value = 'Find';
								console.error('Error:', error);
							});
					});
				} else {
					console.log('Geolocation is not supported by this browser.');
				}
			});
			document.querySelector('.find-location').addEventListener('submit', function(event) {
				event.preventDefault();
				var location = document.querySelector('.find-location input[type="text"]').value;
				var submit = document.querySelector('.find-location input[type="submit"]');
				submit.value = 'Loading ...'
				fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${location}/next7days?unitGroup=metric&key=Q9WTTTKYS9S2JMWXNTDR2H7DU`)
					.then(response => response.json())
					.then(data => {
						submit.value = 'Find'
						console.log(data)
						if (data) {
							document.querySelector('.location').textContent = data.resolvedAddress;
							document.querySelector('.degree .num').textContent = data.currentConditions.temp;
							document.querySelector('.windspeed').textContent = data.currentConditions.windspeed+'Km/h';
							document.querySelector('.precipprob').textContent = data.currentConditions.precipprob+'%'
							// Map the icon from the API to the corresponding ion-icon
							var iconMap = {
								'snow': 'snow-outline',
								'rain': 'rainy-outline',
								'fog': 'cloudy-outline',
								'wind': 'flag-outline',
								'cloudy': 'cloudy-outline',
								'partly-cloudy-day': 'partly-sunny-outline',
								'partly-cloudy-night': 'cloudy-night-outline',
								'clear-day': 'sunny-outline',
								'clear-night': 'moon-outline',
							};
							var icon = iconMap[data.currentConditions.icon] || 'help-circle-outline'; // Use 'help-circle-outline' as a default icon
							document.querySelector('.forecast-icon ion-icon').name = icon;
							// Loop through forecast data and update each day
							data.days.forEach((day, index) => {
								document.querySelector(`.forecast:nth-child(${index + 2}) .day`).textContent = day.datetime;
								document.querySelector(`.forecast:nth-child(${index + 2}) .degree`).textContent = day.tempmax + '째C';
								document.querySelector(`.forecast:nth-child(${index + 2}) .lowTemp`).textContent = day.tempmin + '째C';
								icon = iconMap[day.icon] || 'help-circle-outline';
								document.querySelector(`.forecast:nth-child(${index + 2}) .forecast-icon ion-icon`).name = icon;
							});
						} else {
							console.error('Data not found in the response');
						}
					})

			});
			var locations = [
				{ name: 'New York', timeZone: 'America/New_York' },
				{ name: 'Los Angeles', timeZone: 'America/Los_Angeles' },
				{ name: 'Chicago', timeZone: 'America/Chicago' },
				{ name: 'London', timeZone: 'Europe/London' },
			];
			
			locations.forEach(function(location) {
				var date = new Date();
				var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric' };
				var formatter = new Intl.DateTimeFormat('en-US', { ...options, timeZone: location.timeZone });
				var dateTime = formatter.format(date);

				var locationElements = Array.from(document.querySelectorAll('.live-camera .location'));
				var locationElement = locationElements.filter(function(element) {
					return element.textContent.includes(location.name);
				})[0];

				if (locationElement) {
					locationElement.nextElementSibling.textContent = dateTime;
				}
			});
			var date = new Date();
			document.querySelector('.todayDay').textContent = date.getDate() + ' ' + date.toLocaleString('default', { month: 'long' });
			document.querySelector('.todayDate').textContent = date.toLocaleDateString('en-US', { weekday: 'long' });
		</script>
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/plugins.js"></script>
		<script src="js/app.js"></script>
		
	</body>

</html>